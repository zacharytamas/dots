source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh
source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
eval "$(fzf --zsh)"
eval "$(zoxide init zsh)"

HISTFILE=$HOME/.zhistory
SAVEHIST=1000
HISTSIZE=999
setopt hist_expire_dups_first
setopt hist_ignore_dups
setopt hist_verify
setopt share_history

# completion using arrow keys (based on history)
bindkey '^[[A' history-search-backward
bindkey '^[[B' history-search-forward

export PATH="/opt/homebrew/bin:$PATH"
export PATH="$HOME/go/bin:$PATH"

# bun
[ -s "$HOME/.bun/_bun" ] && source "$HOME/.bun/_bun"
export BUN_INSTALL="$HOME/.bun" 
export PATH="$BUN_INSTALL/bin:$PATH"

export XDG_CONFIG_HOME="$HOME/.config"
export EDITOR="nvim"
export VISUAL="cursor --wait"

# paths
export PATH="$HOME/.local/bin:$HOME/bin:$PATH"
export PATH="$(yarn global bin):$PATH"
export PATH="$HOME/.local/share/uv/python/cpython-3.11.14-macos-aarch64-none/bin:$PATH"

# completions
source <(git machete completion zsh)

# aliases
alias ls="eza --icons=always --hyperlink"

# helper functions
pyclean () {
    find . -type f -name '*.py[co]' -delete -o -type d -name __pycache__ -delete
}

{{ if eq .chezmoi.os "darwin" }}
alias flush_dns="sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder"
{{ end }}

# Added by Antigravity
export PATH="$HOME/.antigravity/antigravity/bin:$PATH"

# bun completions
[ -s "$HOME/.bun/_bun" ] && source "$HOME/.bun/_bun"

alias da="eval \"\$(devtree activate)\""

alias loadenv='set -a && source .env && set +a'

alias oc_config='cursor ~/.config/opencode'

export WARP_API_TOKEN="{{onepasswordRead "op://Private/Warp/credential"}}"
export OPENCODE_EXPERIMENTAL_LSP_TOOL=1

eval "$(starship init zsh)"

if command -v wt >/dev/null 2>&1; then eval "$(command wt config shell init zsh)"; fi
